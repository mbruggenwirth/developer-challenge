!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);r(1);function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t,r){var n=t+r;return n>=e.length?n-e.length:n}var c=function(){function e(t){i(this,e),this.options=Object.assign({},t),this.score=0,this.player={name:this.options.name,color:this.options.color}}return s(e,[{key:"assignDOM",value:function(e){this.DOM=e,this.renderScore()}},{key:"increaseScore",value:function(){this.score=this.score+1,this.renderScore()}},{key:"renderScore",value:function(){this.DOM.style.flexGrow=this.score+1}},{key:"unsetAsActivePlayer",value:function(){this.DOM.classList.remove("active")}},{key:"setAsActivePlayer",value:function(){this.DOM.classList.add("active")}}]),e}(),u=function(){function e(t,r){i(this,e),this.square=null,this.lines=null,this.row=t,this.col=r,this.positions=["top","right","bottom","left"],this.renderSquare(),this.neighbours={}}return s(e,[{key:"renderSquare",value:function(){var e=this;return this.square=document.createElement("div"),this.square.classList.add("square"),this.lines=n(this.positions).map(function(){return document.createElement("span")}),this.lines.forEach(function(t){t.addEventListener("click",function(t){return e.handleLineClick(t.target)}),e.square.appendChild(t)}),this.square}},{key:"handleLineClick",value:function(e){var t=this.positions[this.lines.indexOf(e)],r=[];if(e.classList.contains("set"))return!1;(this.setActiveLine(e),this.checkWinner(this)&&r.push(this),this.neighbours[t])&&(this.handleNeighbour(t)&&r.push(this.neighbours[t]));0===r.length&&f.changePlayer(),f.winningSquares(r)}},{key:"handleNeighbour",value:function(e){var t=a(this.positions,this.positions.indexOf(e),2);return this.setActiveLine(this.neighbours[e].lines[t]),this.checkWinner(this.neighbours[e])}},{key:"checkWinner",value:function(e){return 4===e.lines.filter(function(e){return e.classList.contains("set")}).length}},{key:"setActiveLine",value:function(e){e.classList.add("set")}}]),e}(),l=function(){function e(t){var r=this;i(this,e);this.options=Object.assign({},{grid:3},t),this.grid=this.options.grid?this.options.grid:3,this.matrix=n(Array(this.grid)).map(function(e){return Array(r.grid).fill(0)}),this.squares=this.matrix,this.createBoard(),this.createGrid(),this.setNeighbours(),this.activePlayer=0,this.players=this.setPlayers(this.options.players),this.players[this.activePlayer].setAsActivePlayer(),this.total=0}return s(e,[{key:"createBoard",value:function(){var e=document.getElementById("game");this.gameBoard=document.createElement("div"),this.scoreBoard=document.createElement("div"),this.gameBoard.classList.add("grid"),this.scoreBoard.classList.add("scores"),e.appendChild(this.gameBoard),e.appendChild(this.scoreBoard)}},{key:"createGrid",value:function(){var e=this;this.matrix.map(function(t,r){var n=document.createElement("div");n.classList.add("row"),t.map(function(t,i){var o=new u(r,i);e.squares[r][i]=o,n.appendChild(o.renderSquare()),e.gameBoard.appendChild(n)})})}},{key:"setNeighbours",value:function(){var e=this;this.matrix.forEach(function(t,r){t.forEach(function(t,n){e.findNeighboursOfSquare(e.squares[r][n])})})}},{key:"setPlayers",value:function(e){var t=this;return e.map(function(e){var r=document.createElement("span");return r.style.backgroundColor=e.player.color,r.innerHTML="<span>It's your turn now, ".concat(e.player.name,"</span>"),r.setAttribute("data-winner","Winner: ".concat(e.player.name)),t.scoreBoard.append(r),e.assignDOM(r),e})}},{key:"findSquareOnPosition",value:function(e,t){if(void 0!==this.squares[e]&&void 0!==this.squares[e][t])return this.squares[e][t]}},{key:"findNeighboursOfSquare",value:function(e){e.neighbours={top:this.findSquareOnPosition(e.row-1,e.col),right:this.findSquareOnPosition(e.row,e.col+1),bottom:this.findSquareOnPosition(e.row+1,e.col),left:this.findSquareOnPosition(e.row,e.col-1)}}},{key:"changePlayer",value:function(){this.players.forEach(function(e){return e.unsetAsActivePlayer()}),this.activePlayer=a(this.players,this.activePlayer,1),this.players[this.activePlayer].setAsActivePlayer()}},{key:"winningSquares",value:function(e){var t=this;e.forEach(function(e){t.players[t.activePlayer].increaseScore(),e.square.style.backgroundColor=t.players[t.activePlayer].player.color,t.checkEndGame()})}},{key:"checkEndGame",value:function(){var e=this;if(this.total=this.total+1,this.total>=Math.pow(this.options.grid,2)){var t=Object.keys(this.players).reduce(function(t,r){return e.players[t].score!==e.players[r].score&&(e.players[t].score>e.players[r].score?e.players[t]:e.players[r])});setTimeout(function(){e.scoreBoard.classList.add("end"),e.gameBoard.classList.add("end"),t?t.DOM.classList.add("winner"):e.scoreBoard.classList.add("tie")},500)}}}]),e}();var f=null;!function(){var e=document.getElementById("setup-form"),t=document.querySelector(".setup");Array.from(e.querySelectorAll(".player")).forEach(function(e){var r=t.querySelector(".sides"),n=document.createElement("span");n.style.backgroundColor=e.querySelector("input.player-color").value,r.append(n),e.querySelector("input.player-color").addEventListener("change",function(e){n.style.backgroundColor=e.target.value})}),e.querySelector("#setup-grid").addEventListener("change",function(e){document.getElementById("setup-grid__preview").innerText=e.target.value}),e.addEventListener("submit",function(r){r.preventDefault();var n={grid:e.querySelector("#setup-grid").value,players:[]};n.players=Array.from(e.querySelectorAll(".player")).map(function(e){return{name:e.querySelector("input.player-name").value,color:e.querySelector("input.player-color").value}}),f=new l({grid:parseInt(n.grid),players:n.players.map(function(e){return new c({name:e.name,color:e.color})})}),t.remove()})}()},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var i={sourceMap:!0,hmr:!0,transform:void 0,insertInto:void 0};r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){},function(e,t,r){var n={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),s=null,a=0,c=[],u=r(4);function l(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=n[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(v(i.parts[s],t))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(v(i.parts[s],t));n[i.id]={id:i.id,refs:1,parts:a}}}}function f(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}function d(e,t){var r=o(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,i)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function p(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),d(e,t),t}function y(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function v(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=a++;r=s||(s=p(t)),n=g.bind(null,r,c,!1),i=g.bind(null,r,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),d(e,t),t}(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=u(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,r,t),i=function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=p(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){h(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return l(r,t),function(e){for(var i=[],o=0;o<r.length;o++){var s=r[o];(a=n[s.id]).refs--,i.push(a)}e&&l(f(e,t),t);for(o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete n[a.id]}}}};var m=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}();function g(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}}]);